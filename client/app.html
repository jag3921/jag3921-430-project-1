<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Star Wars App</title>
    <h1>Interactive Star Wars App</h1>
</head>
<body>
    <h3>Select a quiz category: </h3>
<select id="selectCategory">
    <option value="people">People</option>
    <option value="planets">Planets</option>
    <option value="films">Films</option>
    <option value="species">Species</option>
    <option value="vehicles">Vehicles</option>
    <option value="starships">Starships</option>
</select>
<button type="button" id="btn">Begin Quiz!</button>
<br>
<h2 id="question"></h2>
<div id="answerField"></div>
    <script>
        const selection = document.querySelector('#selectCategory');
        const btn = document.querySelector('#btn');
        const questionPrompt = document.querySelector('#question');
        let answerPrompt;
        const answerField = document.querySelector('#answerField');
        let startedQuiz = false, answeredCorrectly = false, quizCompleted = false;
        // Organization of url object credit to: https://www.youtube.com/watch?v=qb6sMTeyLJY
        // Time stamp - 4:05
        let urls = {
            base: 'https://swapi.dev/api/',
            people: 'people/',
            planets: 'planets/',
            films: 'films/',
            species: 'species/',
            vehicles: 'vehicles/',
            starships: 'starships/'
        };

        const loadApi = (endpoint) => {
            fetch(urls.base + selection.value).then(response => {
                return response.json();
            })
            .then(data => {
                console.log(data);
            });
        };
   
        function quiz() {
            fetch(`/admin?selection=${selection.value}`)
            .then(response => console.log(response))
            .catch(error => {console.log(error)});
            /*
            while(!quizCompleted) {

            } */
            createQuizForm("Why do you ask?", "Because");
        }

        function createQuizForm(question, answer) {
            questionPrompt.innerHTML = question;
            answerPrompt = document.createElement("input");
            answerPrompt.setAttribute('type', 'text');
            answerPrompt.setAttribute('value', 'default');
            answerField.append(answerPrompt);

            answerField.addEventListener('input', (e) => {
                if (e.target.value === answer) {
                    answeredCorrectly = true;
                    console.log("Your answer is correct!");
                }
            });
           console.log(answerPrompt.value);
        }
        window.onload = function () {
        } 
        btn.onclick = (e) => {
           quiz();
        }

        logInputValue = (e, answer) => {
            let userAnswer = e.target.value;
            if (userAnswer == answer) {
                answeredCorrectly = true;
                
            }
        }
    </script>
</body>

</html>